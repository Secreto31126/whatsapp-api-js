{
  "version": 3,
  "sources": ["../../../src/middleware/web-standard.ts"],
  "sourcesContent": ["import { WhatsAppAPIMiddleware } from \"./globals.js\";\nimport { isInteger } from \"../utils.js\";\n\nimport type { GetParams } from \"../types\";\n\n/**\n * Web Standard API http server middleware for WhatsAppAPI (deno/bun/SvelteKit/Hono)\n */\nexport class WhatsAppAPI extends WhatsAppAPIMiddleware {\n    /**\n     * POST request handler for Web Standard API http server\n     *\n     * @override\n     * @param req - The request object\n     * @returns The status code to be sent to the client\n     */\n    async handle_post(req: Request) {\n        try {\n            const body = await req.text();\n\n            return this.post(\n                JSON.parse(body || \"{}\"),\n                body,\n                req.headers.get(\"x-hub-signature-256\") ?? \"\"\n            );\n        } catch (e) {\n            // In case the JSON.parse fails \u00AF\\_(\u30C4)_/\u00AF\n            return isInteger(e) ? e : 500;\n        }\n    }\n\n    /**\n     * GET request handler for Web Standard API http server\n     *\n     * @override\n     * @param req - The request object\n     * @returns The challenge string to be sent to the client\n     * @throws The error code\n     */\n    handle_get(req: Request) {\n        try {\n            return this.get(\n                Object.fromEntries(new URL(req.url).searchParams) as GetParams\n            );\n        } catch (e) {\n            // In case who knows what fails \u00AF\\_(\u30C4)_/\u00AF\n            throw isInteger(e) ? e : 500;\n        }\n    }\n}\n"],
  "mappings": "AAAA,OAAS,0BAA6B,eACtC,OAAS,cAAiB,cAOnB,MAAM,oBAAoB,qBAAsB,CAQnD,MAAM,YAAY,IAAc,CAC5B,GAAI,CACA,MAAM,KAAO,MAAM,IAAI,KAAK,EAE5B,OAAO,KAAK,KACR,KAAK,MAAM,MAAQ,IAAI,EACvB,KACA,IAAI,QAAQ,IAAI,qBAAqB,GAAK,EAC9C,CACJ,OAAS,EAAG,CAER,OAAO,UAAU,CAAC,EAAI,EAAI,GAC9B,CACJ,CAUA,WAAW,IAAc,CACrB,GAAI,CACA,OAAO,KAAK,IACR,OAAO,YAAY,IAAI,IAAI,IAAI,GAAG,EAAE,YAAY,CACpD,CACJ,OAAS,EAAG,CAER,MAAM,UAAU,CAAC,EAAI,EAAI,GAC7B,CACJ,CACJ",
  "names": []
}
